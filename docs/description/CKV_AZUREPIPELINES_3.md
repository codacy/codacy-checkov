# Ensure set variable is not marked as a secret

_This pattern description was written by a Codacy bot for Checkov. Send feedback to ai-patterns@codacy.com_

# Checkov Security Check: CKV_AZUREPIPELINES_3

## What this Check Does

This Checkov security check, `CKV_AZUREPIPELINES_3`, is designed to identify instances where a variable is being set as a secret within Azure DevOps Pipelines.

The check scans the configuration and looks for the `task.setvariable` command in both `bash` and `powershell` scripts. If found, it further checks if the `issecret=true` attribute is present. If a variable is being set as a secret, the check will return a failure.

## Why this Check is Important

Secrets such as passwords, API keys, or tokens should not be hardcoded into code or configuration files, but rather securely stored and accessed. Setting a variable as a secret within the pipeline script might expose sensitive information in logs or error messages, making it a potential security risk.

This is especially important in a continuous integration/continuous deployment (CI/CD) environment like Azure Pipelines, where many users might have access to build logs. 

## How to Fix this Issue

To resolve this issue, secrets should not be embedded directly within the pipeline scripts. Instead, consider the following best practices:

1. **Use Azure Key Vault**: Store your secrets in Azure Key Vault and access them securely from your pipelines.
2. **Use Pipeline Variables**: You can define secret variables in Azure Pipelines and reference them in your pipeline.
3. **Use Variable Groups**: For a set of secrets shared across multiple pipelines, consider using Variable Groups in Azure DevOps.

Remember that secrets should not be printed in logs or displayed in any other way. If you need to use a secret in a script, make sure it's not printed out or logged in plain text.

_(Text generated by Codacy Bot. Send feedback to ai-pattern-text@codacy.com)_

# Ensure the pipeline image uses a non latest version tag

_This pattern description was written by a Codacy bot for Checkov. Send feedback to ai-patterns@codacy.com_

---
Title: Ensure the pipeline image uses a non-latest version tag

---

## Security Check Overview

The `ImageReferenceLatestTag` security check is designed to identify an insecure practice in the use of Docker images within CircleCI pipeline jobs. 

Specifically, this check verifies that Docker images referenced in your CircleCI pipeline are not tagged with `:latest`. This is an issue as the `:latest` tag in Docker is mutable and does not necessarily point to the most recent version of an image. Instead, it is a mutable reference that can point to any version. As a result, developers might pull an unintended version leading to unpredictable behavior or potential security issues if the `latest` tag has been updated with a vulnerable version. 

## Why this Matters from a Security Perspective

From a security perspective, it is crucial to assure that all software components used in your systems are exactly the versions you expect them to be. This includes Docker images. By using the `:latest` tag, your pipelines could be pulling an image that has been updated with insecure libraries or dependencies, or that behaves differently than expected, leading to potential security risks or operational issues.

Furthermore, this security check aligns with the principle of immutability, a best practice in software development and deployment. Immutable infrastructure reduces inconsistencies in development, staging, and production environments, and simplifies rollbacks, since you can redeploy the exact previous version of an image.

## How to Fix this Issue

To fix this issue, replace the `:latest` tag with a specific version tag for all Docker images used in your CircleCI pipeline jobs. This ensures that the pipeline always uses the same version of the image, providing predictability and control over your environment.

For example, instead of:

```yaml
jobs:
  build:
    docker:
      - image: circleci/ruby:latest
```

Use:

```yaml
jobs:
  build:
    docker:
      - image: circleci/ruby:2.7.1
```

It is also good practice to regularly update the image tags to newer, secure versions after you have tested them. This helps keep your environment up to date and secure.

_(Text generated by Codacy Bot. Send feedback to ai-pattern-text@codacy.com)_

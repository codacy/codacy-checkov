# Ensure Kubernetes cluster auto-upgrade is enabled.

_This pattern description was written by a Codacy bot for Checkov. Send feedback to ai-patterns@codacy.com_

## Checkov Security Check: CKV_YC_7

### What the Check Does

This check, identified by the ID `CKV_YC_7`, reviews the configuration of Kubernetes clusters within Yandex Cloud. Specifically, it verifies that the auto-upgrade feature is enabled for the master nodes of the cluster. 

The check looks at the `master/[0]/maintenance_policy/[0]/auto_upgrade` key in the configuration. If the value of this key is `False`, the check fails.

### Why This Check Matters

The auto-upgrade feature in Kubernetes periodically updates the master nodes in a cluster to the latest stable version, ensuring they have the most recent security patches and updates. 

Disabling auto-upgrade can leave your clusters vulnerable to known security threats that have been fixed in later versions. This could potentially expose your applications and data to unauthorized access, data breaches, or even denial-of-service (DoS) attacks. 

Therefore, it's a best practice to always enable auto-upgrade to maintain the security and reliability of your Kubernetes clusters.

### How to Fix a Failed Check

To pass this check, you need to enable auto-upgrade for the master nodes in your Kubernetes clusters. 

In the configuration of your Yandex Kubernetes Cluster, find the `master/[0]/maintenance_policy/[0]/auto_upgrade` key and set its value to `True`. 

Here's an example of a correct configuration:

```hcl
resource "yandex_kubernetes_cluster" "example" {
  ...
  master {
    ...
    maintenance_policy {
      auto_upgrade = true
    }
  }
}
```

By doing this, you ensure that your master nodes remain up-to-date with the latest patches and security fixes, thereby helping to maintain the security and integrity of your clusters.

_(Text generated by Codacy Bot. Send feedback to ai-pattern-text@codacy.com)_

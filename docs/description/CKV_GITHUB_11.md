# Ensure GitHub branch protection dismisses stale review on new commit

_This pattern description was written by a Codacy bot for Checkov. Send feedback to ai-patterns@codacy.com_

## CKV_GITHUB_11: Checkov Security Check for GitHub Branch Protection

### What the check does:

This Checkov security check, identified by the ID "CKV_GITHUB_11", verifies that the GitHub branch protection is configured to dismiss stale reviews whenever a new commit is pushed. 

Specifically, it checks for the configuration under "required_pull_request_reviews/dismiss_stale_reviews" in the GitHub repository settings.

### Why this check is important:

The purpose of this check is to ensure that outdated code reviews are dismissed when new commits are pushed to a branch. 

Without this protection, outdated reviews, which may no longer be applicable due to changes in the code, can remain approved. This could lead to potentially harmful code being merged into the codebase without being properly reviewed against the latest changes. 

Therefore, this security check helps to prevent the introduction of vulnerabilities into the codebase that could be exploited by malicious actors.

### How to fix if the check fails:

If this check fails, that means the GitHub repository is not configured to dismiss stale reviews when a new commit is pushed.

To fix this issue, you should:

1. Go to the GitHub repository settings.
2. Navigate to the "Branches" tab.
3. In the "Branch protection rules" section, click "Add rule" or edit an existing rule.
4. Under "Protect matching branches", select the branches you want to apply the rule to.
5. In the "Pull request reviews" section, check the box "Dismiss stale pull request approvals when new commits are pushed".
6. Click on "Create" or "Save changes" to apply the rule.

By doing this, any existing approvals on a pull request will be dismissed automatically when new commits are pushed to the branch, ensuring that all code is properly reviewed before being merged.

_(Text generated by Codacy Bot. Send feedback to ai-pattern-text@codacy.com)_

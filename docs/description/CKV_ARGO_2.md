# Ensure Workflow pods are running as non-root user

_This pattern description was written by a Codacy bot for Checkov. Send feedback to ai-patterns@codacy.com_

# Checkov Security Check - RunAsNonRoot

## Issue Identified

This security check, identified as `CKV_ARGO_2`, ensures that all the workflow pods in your Argo application are running as non-root users. Specifically, it analyses the `securityContext` configuration of the pods to check if the `runAsNonRoot` option is set to `True`.

## Security Implications

Running containers or pods as a root user can pose significant security risks. If a malicious entity gains access to a pod running as root, they can have unrestricted permissions to execute undesired actions, potentially compromising the entire system. This issue is particularly dangerous in a Kubernetes environment where multiple pods are running on the same node. An attacker who compromises one pod can potentially gain access to other pods or even the entire cluster.

## How to Fix

The solution to this issue is straightforward. Simply set the `runAsNonRoot` option to `True` in the `securityContext` configuration of all your pods. This ensures that your pods are not running as root users, mitigating the risk of a root-level compromise.

Here is an example of a properly configured `securityContext`:

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: myapp-pod
  labels:
    app: myapp
spec:
  securityContext:
    runAsNonRoot: true
  containers:
  - name: myapp-container
    image: myapp:latest
```

In this configuration, the `runAsNonRoot` security context is applied to all containers in the pod. Depending on your specific requirements, you may also set the `runAsNonRoot` option at the individual container level.

By making sure that your pods are running as non-root users, you greatly enhance the security of your Argo workflows and your Kubernetes cluster as a whole.

_(Text generated by Codacy Bot. Send feedback to ai-pattern-text@codacy.com)_
